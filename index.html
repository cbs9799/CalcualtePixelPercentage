<!DOCTYPE html>
<html>
<head>
<style>
body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    background-color: #f0f0f0;
    font-family: Arial, sans-serif;
}

#output {
    text-align: center;
    margin-top: 20px;
}
</style>
</head>
<body>
<input type="file" id="imageFile" name="imageFile" accept="image/*">
<p id="output"></p>
<img id="resultImage">

<script>
document.getElementById('imageFile').addEventListener('change', function(e) {
    var file = e.target.files[0];
    var reader = new FileReader();
    reader.onload = function(e) {
        var img = new Image();
        img.onload = function() {
            var canvas = document.createElement('canvas');
            canvas.width = img.width;
            canvas.height = img.height;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, img.width, img.height);
            var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            var data = imageData.data;
            var nonTransparentOrBlackPixels = 0;
            for (var i = 0; i < data.length; i += 4) {
                var r = data[i];
                var g = data[i + 1];
                var b = data[i + 2];
                var a = data[i + 3];
                if (a != 0 && (r != 0 || g != 0 || b != 0)) {
                    nonTransparentOrBlackPixels++;
                } else {
                    data[i] = 0; // red
                    data[i + 1] = 255; // green
                    data[i + 2] = 0; // blue
                }
            }
            ctx.putImageData(imageData, 0, 0);
            var totalPixels = img.width * img.height;
            var percentage = (nonTransparentOrBlackPixels / totalPixels) * 100;
            var output = "Image width: " + img.width + "px\n";
            output += "Image height: " + img.height + "px\n";
            output += "File size: " + (file.size / 1024).toFixed(2) + "KB\n";
            output += "The percentage of non-transparent or non-black pixels: " + percentage.toFixed(2) + "%";
            document.getElementById('output').textContent = output;
            document.getElementById('resultImage').src = canvas.toDataURL();
        };
        img.src = e.target.result;
    };
    reader.readAsDataURL(file);
});
</script>

</body>
</html>
